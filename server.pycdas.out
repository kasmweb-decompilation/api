server.pyc (Python 3.8)
[Code]
    File Name: server.py
    Object Name: <module>
    Arg Count: 0
    Pos Only Arg Count: 0
    KW Only Arg Count: 0
    Locals: 0
    Stack Size: 11
    Flags: 0x00000040 (CO_NOFREE)
    [Names]
        'argparse'
        'ipaddress'
        'logging.config'
        'logging'
        'os'
        're'
        'sys'
        'time'
        'cherrypy'
        'yaml'
        'alembic'
        'command'
        'alembic.config'
        'Config'
        '_cperror'
        'sqlalchemy'
        'create_engine'
        'data.access_postgres'
        'DataAccessPostgres'
        'data.data_access_factory'
        'DataAccessFactory'
        'data.database_session_tool'
        'DatabaseSessionTool'
        'log.handlers'
        'KasmLogHandler'
        'get_db_session'
        'database_connectivity_test'
        'tools'
        'register'
        'header_sanitizer'
        'str'
        'generic_error_message'
        'error_page_404'
        'generic_error_response'
        '__name__'
        'ArgumentParser'
        'parser'
        'add_argument'
        'parse_args'
        'args'
        'path'
        'exists'
        'cfg'
        'Exception'
        'safe_load'
        'open'
        'app_config'
        'db_port_override'
        'int'
        'db_host_override'
        'config'
        'dictConfig'
        'getLogger'
        'logger'
        'max_retries'
        'connected'
        'info'
        'range'
        'x'
        'e'
        'exception'
        'sleep'
        'error'
        'exit'
        'initialize_database'
        'upgrade_database'
        'populate_production'
        'temp_config'
        'f'
        'write'
        'dump'
        'x_arg'
        'alembic_config'
        'alembic_cfg'
        'Namespace'
        'cmd_opts'
        'setattr'
        'append'
        'postgres'
        'initialize_postgres_db'
        'Postgres'
        'drop_schema'
        'create_schema'
        'create_installation_id'
        'installation_id'
        'environ'
        'chdir'
        'dirname'
        'stamp'
        'seed_file'
        'file'
        'seed_data'
        'upgrade'
        'remove'
        'activation_key_file'
        'read'
        'replace'
        'license_content'
        'initial_activate'
        'InitialActivate'
        'activate'
        'db'
        'log_hostname'
        'create_cached_kasmloghandler'
        'kl'
        'addHandler'
        'realpath'
        '__file__'
        'getenv'
        'lower'
        'port'
        'autoreload'
        'update'
        'get'
        'enable_admin_api'
        'admin_api'
        'AdminApi'
        'tree'
        'mount'
        'enable_filter_api'
        'filter_api'
        'FilterApi'
        'get_config_settings'
        'subscription_settings'
        'enable_subscription_api'
        'subscription_api'
        'SubscriptionApi'
        'enable_client_api'
        'client_api'
        'ClientApi'
        'enable_public_api'
        'public_api'
        'PublicAPI'
        'engine'
        'start'
        'block'
    [Var Names]
    [Free Vars]
    [Cell Vars]
    [Constants]
        0
        None
        (
            'command'
        )
        (
            'Config'
        )
        (
            '_cperror'
        )
        (
            'create_engine'
        )
        (
            'DataAccessPostgres'
        )
        (
            'DataAccessFactory'
        )
        (
            'DatabaseSessionTool'
        )
        (
            'KasmLogHandler'
        )
        [Code]
            File Name: server.py
            Object Name: get_db_session
            Arg Count: 1
            Pos Only Arg Count: 0
            KW Only Arg Count: 0
            Locals: 2
            Stack Size: 4
            Flags: 0x00000043 (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)
            [Names]
                'DataAccessFactory'
                'createSession'
                'execute_native_query'
            [Var Names]
                'config'
                'db'
            [Free Vars]
            [Cell Vars]
            [Constants]
                None
                'database'
                'type'
                'SELECT 1;'
            [Disassembly]
                0       LOAD_GLOBAL                     0: DataAccessFactory
                2       LOAD_METHOD                     1: createSession
                4       LOAD_FAST                       0: config
                6       LOAD_CONST                      1: 'database'
                8       BINARY_SUBSCR                   
                10      LOAD_CONST                      2: 'type'
                12      BINARY_SUBSCR                   
                14      LOAD_FAST                       0: config
                16      CALL_METHOD                     2
                18      STORE_FAST                      1: db
                20      LOAD_FAST                       1: db
                22      LOAD_METHOD                     2: execute_native_query
                24      LOAD_CONST                      3: 'SELECT 1;'
                26      CALL_METHOD                     1
                28      POP_TOP                         
                30      LOAD_FAST                       1: db
                32      RETURN_VALUE                    
        'get_db_session'
        [Code]
            File Name: server.py
            Object Name: database_connectivity_test
            Arg Count: 1
            Pos Only Arg Count: 0
            KW Only Arg Count: 0
            Locals: 1
            Stack Size: 4
            Flags: 0x00000043 (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)
            [Names]
                'create_engine'
                'DataAccessPostgres'
                'get_url'
            [Var Names]
                'config'
            [Free Vars]
            [Cell Vars]
            [Constants]
                None
                True
                (
                    'pool_pre_ping'
                )
            [Disassembly]
                0       LOAD_GLOBAL                     0: create_engine
                2       LOAD_GLOBAL                     1: DataAccessPostgres
                4       LOAD_METHOD                     2: get_url
                6       LOAD_FAST                       0: config
                8       CALL_METHOD                     1
                10      LOAD_CONST                      1: True
                12      LOAD_CONST                      2: ('pool_pre_ping',)
                14      CALL_FUNCTION_KW                2
                16      POP_TOP                         
                18      LOAD_CONST                      0: None
                20      RETURN_VALUE                    
        'database_connectivity_test'
        'on_start_resource'
        [Code]
            File Name: server.py
            Object Name: header_sanitizer
            Arg Count: 0
            Pos Only Arg Count: 0
            KW Only Arg Count: 0
            Locals: 6
            Stack Size: 10
            Flags: 0x00000003 (CO_OPTIMIZED | CO_NEWLOCALS)
            [Names]
                'cherrypy'
                'request'
                'headers'
                'get'
                'split'
                'int'
                'ValueError'
                'logger'
                'error'
                'HTTPError'
                'ipaddress'
                'ip_address'
                'encode'
                'decode'
                'UnicodeError'
                'warning'
                'len'
                'rstrip'
                're'
                'compile'
                'IGNORECASE'
                'all'
            [Var Names]
                'hostname_valid'
                'candidate_hostname'
                'candidate_host'
                'candidate_port'
                'er'
                'normalized_host'
            [Free Vars]
            [Cell Vars]
                'allowed'
            [Constants]
                None
                False
                'HOST'
                ':'
                0
                65535
                'Value outside valid port range.'
                'Host header '
                ' does not have a valid port number:'
                '.'
                400
                True
                'idna'
                'Received unicode error trying to decode punycode hostname '
                ': '
                255
                '(?!-)[A-Z0-9-_]{1,63}(?<!-)$'
                [Code]
                    File Name: server.py
                    Object Name: <genexpr>
                    Arg Count: 1
                    Pos Only Arg Count: 0
                    KW Only Arg Count: 0
                    Locals: 2
                    Stack Size: 4
                    Flags: 0x00000033 (CO_OPTIMIZED | CO_NEWLOCALS | CO_NESTED | CO_GENERATOR)
                    [Names]
                        'match'
                    [Var Names]
                        '.0'
                        'hostname_piece'
                    [Free Vars]
                        'allowed'
                    [Cell Vars]
                    [Constants]
                        None
                    [Disassembly]
                        0       LOAD_FAST                       0: .0
                        2       FOR_ITER                        16 (to 20)
                        4       STORE_FAST                      1: hostname_piece
                        6       LOAD_DEREF                      0: allowed
                        8       LOAD_METHOD                     0: match
                        10      LOAD_FAST                       1: hostname_piece
                        12      CALL_METHOD                     1
                        14      YIELD_VALUE                     
                        16      POP_TOP                         
                        18      JUMP_ABSOLUTE                   2
                        20      LOAD_CONST                      0: None
                        22      RETURN_VALUE                    
                'header_sanitizer.<locals>.<genexpr>'
                'Hostname '
                ' failed regular expression validation.'
                ' exceeds valid hostname length.'
                'Hostname is not a valid hostname '
            [Disassembly]
                0       LOAD_CONST                      1: False
                2       STORE_FAST                      0: hostname_valid
                4       LOAD_GLOBAL                     0: cherrypy
                6       LOAD_ATTR                       1: request
                8       LOAD_ATTR                       2: headers
                10      LOAD_METHOD                     3: get
                12      LOAD_CONST                      2: 'HOST'
                14      CALL_METHOD                     1
                16      STORE_FAST                      1: candidate_hostname
                18      LOAD_CONST                      3: ':'
                20      LOAD_FAST                       1: candidate_hostname
                22      COMPARE_OP                      6 (in)
                24      POP_JUMP_IF_FALSE               148
                26      LOAD_FAST                       1: candidate_hostname
                28      LOAD_METHOD                     4: split
                30      LOAD_CONST                      3: ':'
                32      CALL_METHOD                     1
                34      UNPACK_SEQUENCE                 2
                36      STORE_FAST                      2: candidate_host
                38      STORE_FAST                      3: candidate_port
                40      SETUP_FINALLY                   36 (to 78)
                42      LOAD_GLOBAL                     5: int
                44      LOAD_FAST                       3: candidate_port
                46      CALL_FUNCTION                   1
                48      LOAD_CONST                      4: 0
                50      COMPARE_OP                      1 (<=)
                52      POP_JUMP_IF_TRUE                66
                54      LOAD_GLOBAL                     5: int
                56      LOAD_FAST                       3: candidate_port
                58      CALL_FUNCTION                   1
                60      LOAD_CONST                      5: 65535
                62      COMPARE_OP                      5 (>=)
                64      POP_JUMP_IF_FALSE               74
                66      LOAD_GLOBAL                     6: ValueError
                68      LOAD_CONST                      6: 'Value outside valid port range.'
                70      CALL_FUNCTION                   1
                72      RAISE_VARARGS                   1
                74      POP_BLOCK                       
                76      JUMP_ABSOLUTE                   152
                78      DUP_TOP                         
                80      LOAD_GLOBAL                     6: ValueError
                82      COMPARE_OP                      10 (<EXCEPTION MATCH>)
                84      POP_JUMP_IF_FALSE               144
                86      POP_TOP                         
                88      STORE_FAST                      4: er
                90      POP_TOP                         
                92      SETUP_FINALLY                   38 (to 132)
                94      LOAD_GLOBAL                     7: logger
                96      LOAD_METHOD                     8: error
                98      LOAD_CONST                      7: 'Host header '
                100     LOAD_FAST                       1: candidate_hostname
                102     FORMAT_VALUE                    0
                104     LOAD_CONST                      8: ' does not have a valid port number:'
                106     LOAD_FAST                       3: candidate_port
                108     FORMAT_VALUE                    0
                110     LOAD_CONST                      9: '.'
                112     BUILD_STRING                    5
                114     CALL_METHOD                     1
                116     POP_TOP                         
                118     LOAD_GLOBAL                     0: cherrypy
                120     LOAD_METHOD                     9: HTTPError
                122     LOAD_CONST                      10: 400
                124     CALL_METHOD                     1
                126     RAISE_VARARGS                   1
                128     POP_BLOCK                       
                130     BEGIN_FINALLY                   
                132     LOAD_CONST                      0: None
                134     STORE_FAST                      4: er
                136     DELETE_FAST                     4: er
                138     END_FINALLY                     
                140     POP_EXCEPT                      
                142     JUMP_ABSOLUTE                   152
                144     END_FINALLY                     
                146     JUMP_FORWARD                    4 (to 152)
                148     LOAD_FAST                       1: candidate_hostname
                150     STORE_FAST                      2: candidate_host
                152     SETUP_FINALLY                   18 (to 172)
                154     LOAD_GLOBAL                     10: ipaddress
                156     LOAD_METHOD                     11: ip_address
                158     LOAD_FAST                       2: candidate_host
                160     CALL_METHOD                     1
                162     POP_TOP                         
                164     LOAD_CONST                      11: True
                166     STORE_FAST                      0: hostname_valid
                168     POP_BLOCK                       
                170     JUMP_FORWARD                    20 (to 192)
                172     DUP_TOP                         
                174     LOAD_GLOBAL                     6: ValueError
                176     COMPARE_OP                      10 (<EXCEPTION MATCH>)
                178     POP_JUMP_IF_FALSE               190
                180     POP_TOP                         
                182     POP_TOP                         
                184     POP_TOP                         
                186     POP_EXCEPT                      
                188     JUMP_FORWARD                    2 (to 192)
                190     END_FINALLY                     
                192     LOAD_FAST                       0: hostname_valid
                194     POP_JUMP_IF_TRUE                392
                198     SETUP_FINALLY                   18 (to 218)
                200     LOAD_FAST                       2: candidate_host
                202     LOAD_METHOD                     12: encode
                204     LOAD_CONST                      12: 'idna'
                206     CALL_METHOD                     1
                208     LOAD_METHOD                     13: decode
                210     CALL_METHOD                     0
                212     STORE_FAST                      5: normalized_host
                214     POP_BLOCK                       
                216     JUMP_FORWARD                    64 (to 282)
                218     DUP_TOP                         
                220     LOAD_GLOBAL                     14: UnicodeError
                222     COMPARE_OP                      10 (<EXCEPTION MATCH>)
                224     POP_JUMP_IF_FALSE               280
                228     POP_TOP                         
                230     STORE_FAST                      4: er
                232     POP_TOP                         
                234     SETUP_FINALLY                   32 (to 268)
                236     LOAD_GLOBAL                     7: logger
                238     LOAD_METHOD                     15: warning
                240     LOAD_CONST                      13: 'Received unicode error trying to decode punycode hostname '
                242     LOAD_FAST                       2: candidate_host
                244     FORMAT_VALUE                    0
                246     LOAD_CONST                      14: ': '
                248     LOAD_FAST                       4: er
                250     FORMAT_VALUE                    0
                252     LOAD_CONST                      9: '.'
                254     BUILD_STRING                    5
                256     CALL_METHOD                     1
                258     POP_TOP                         
                260     LOAD_FAST                       2: candidate_host
                262     STORE_FAST                      5: normalized_host
                264     POP_BLOCK                       
                266     BEGIN_FINALLY                   
                268     LOAD_CONST                      0: None
                270     STORE_FAST                      4: er
                272     DELETE_FAST                     4: er
                274     END_FINALLY                     
                276     POP_EXCEPT                      
                278     JUMP_FORWARD                    2 (to 282)
                280     END_FINALLY                     
                282     LOAD_GLOBAL                     16: len
                284     LOAD_FAST                       5: normalized_host
                286     CALL_FUNCTION                   1
                288     LOAD_CONST                      15: 255
                290     COMPARE_OP                      1 (<=)
                292     POP_JUMP_IF_FALSE               374
                296     LOAD_FAST                       5: normalized_host
                298     LOAD_METHOD                     17: rstrip
                300     LOAD_CONST                      9: '.'
                302     CALL_METHOD                     1
                304     STORE_FAST                      5: normalized_host
                306     LOAD_GLOBAL                     18: re
                308     LOAD_METHOD                     19: compile
                310     LOAD_CONST                      16: '(?!-)[A-Z0-9-_]{1,63}(?<!-)$'
                312     LOAD_GLOBAL                     18: re
                314     LOAD_ATTR                       20: IGNORECASE
                316     CALL_METHOD                     2
                318     STORE_DEREF                     0: allowed
                320     LOAD_GLOBAL                     21: all
                322     LOAD_CLOSURE                    0: allowed
                324     BUILD_TUPLE                     1
                326     LOAD_CONST                      17: <CODE> <genexpr>
                328     LOAD_CONST                      18: 'header_sanitizer.<locals>.<genexpr>'
                330     MAKE_FUNCTION                   8
                332     LOAD_FAST                       5: normalized_host
                334     LOAD_METHOD                     4: split
                336     LOAD_CONST                      9: '.'
                338     CALL_METHOD                     1
                340     GET_ITER                        
                342     CALL_FUNCTION                   1
                344     CALL_FUNCTION                   1
                346     STORE_FAST                      0: hostname_valid
                348     LOAD_FAST                       0: hostname_valid
                350     POP_JUMP_IF_TRUE                392
                354     LOAD_GLOBAL                     7: logger
                356     LOAD_METHOD                     15: warning
                358     LOAD_CONST                      19: 'Hostname '
                360     LOAD_FAST                       1: candidate_hostname
                362     FORMAT_VALUE                    0
                364     LOAD_CONST                      20: ' failed regular expression validation.'
                366     BUILD_STRING                    3
                368     CALL_METHOD                     1
                370     POP_TOP                         
                372     JUMP_FORWARD                    18 (to 392)
                374     LOAD_GLOBAL                     7: logger
                376     LOAD_METHOD                     15: warning
                378     LOAD_CONST                      19: 'Hostname '
                380     LOAD_FAST                       1: candidate_hostname
                382     FORMAT_VALUE                    0
                384     LOAD_CONST                      21: ' exceeds valid hostname length.'
                386     BUILD_STRING                    3
                388     CALL_METHOD                     1
                390     POP_TOP                         
                392     LOAD_FAST                       0: hostname_valid
                394     POP_JUMP_IF_TRUE                426
                398     LOAD_GLOBAL                     7: logger
                400     LOAD_METHOD                     8: error
                402     LOAD_CONST                      22: 'Hostname is not a valid hostname '
                404     LOAD_FAST                       1: candidate_hostname
                406     FORMAT_VALUE                    0
                408     LOAD_CONST                      9: '.'
                410     BUILD_STRING                    3
                412     CALL_METHOD                     1
                414     POP_TOP                         
                416     LOAD_GLOBAL                     0: cherrypy
                418     LOAD_METHOD                     9: HTTPError
                420     LOAD_CONST                      10: 400
                422     CALL_METHOD                     1
                424     RAISE_VARARGS                   1
                426     LOAD_CONST                      0: None
                428     RETURN_VALUE                    
        'header_sanitizer'
        (
            'status'
            'message'
            'traceback'
            'version'
            'return'
        )
        [Code]
            File Name: server.py
            Object Name: generic_error_message
            Arg Count: 4
            Pos Only Arg Count: 0
            KW Only Arg Count: 0
            Locals: 4
            Stack Size: 8
            Flags: 0x00000043 (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)
            [Names]
                'logger'
                'exception'
                'Exception'
            [Var Names]
                'status'
                'message'
                'traceback'
                'version'
            [Free Vars]
            [Cell Vars]
            [Constants]
                None
                'An error has occurred '
                ' - see logs for details'
            [Disassembly]
                0       SETUP_FINALLY                   14 (to 16)
                2       LOAD_GLOBAL                     0: logger
                4       LOAD_METHOD                     1: exception
                6       LOAD_FAST                       1: message
                8       CALL_METHOD                     1
                10      POP_TOP                         
                12      POP_BLOCK                       
                14      JUMP_FORWARD                    20 (to 36)
                16      DUP_TOP                         
                18      LOAD_GLOBAL                     2: Exception
                20      COMPARE_OP                      10 (<EXCEPTION MATCH>)
                22      POP_JUMP_IF_FALSE               34
                24      POP_TOP                         
                26      POP_TOP                         
                28      POP_TOP                         
                30      POP_EXCEPT                      
                32      JUMP_FORWARD                    2 (to 36)
                34      END_FINALLY                     
                36      LOAD_CONST                      1: 'An error has occurred '
                38      LOAD_FAST                       0: status
                40      FORMAT_VALUE                    0
                42      LOAD_CONST                      2: ' - see logs for details'
                44      BUILD_STRING                    3
                46      RETURN_VALUE                    
        'generic_error_message'
        [Code]
            File Name: server.py
            Object Name: error_page_404
            Arg Count: 4
            Pos Only Arg Count: 0
            KW Only Arg Count: 0
            Locals: 4
            Stack Size: 8
            Flags: 0x00000043 (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)
            [Names]
                'logger'
                'warning'
                'Exception'
            [Var Names]
                'status'
                'message'
                'traceback'
                'version'
            [Free Vars]
            [Cell Vars]
            [Constants]
                None
                'An error has occurred '
                ' - see logs for details'
            [Disassembly]
                0       SETUP_FINALLY                   14 (to 16)
                2       LOAD_GLOBAL                     0: logger
                4       LOAD_METHOD                     1: warning
                6       LOAD_FAST                       1: message
                8       CALL_METHOD                     1
                10      POP_TOP                         
                12      POP_BLOCK                       
                14      JUMP_FORWARD                    20 (to 36)
                16      DUP_TOP                         
                18      LOAD_GLOBAL                     2: Exception
                20      COMPARE_OP                      10 (<EXCEPTION MATCH>)
                22      POP_JUMP_IF_FALSE               34
                24      POP_TOP                         
                26      POP_TOP                         
                28      POP_TOP                         
                30      POP_EXCEPT                      
                32      JUMP_FORWARD                    2 (to 36)
                34      END_FINALLY                     
                36      LOAD_CONST                      1: 'An error has occurred '
                38      LOAD_FAST                       0: status
                40      FORMAT_VALUE                    0
                42      LOAD_CONST                      2: ' - see logs for details'
                44      BUILD_STRING                    3
                46      RETURN_VALUE                    
        'error_page_404'
        [Code]
            File Name: server.py
            Object Name: generic_error_response
            Arg Count: 0
            Pos Only Arg Count: 0
            KW Only Arg Count: 0
            Locals: 0
            Stack Size: 4
            Flags: 0x00000043 (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)
            [Names]
                'logger'
                'error'
                '_cperror'
                'format_exc'
                'cherrypy'
                'response'
                'status'
                'body'
            [Var Names]
            [Free Vars]
            [Cell Vars]
            [Constants]
                None
                'Unhandled exception occurred'
                (
                    'exc_info'
                )
                500
                b'<html><body>An unhandled exception occurred check logs for details<body><html>'
            [Disassembly]
                0       LOAD_GLOBAL                     0: logger
                2       LOAD_ATTR                       1: error
                4       LOAD_CONST                      1: 'Unhandled exception occurred'
                6       LOAD_GLOBAL                     2: _cperror
                8       LOAD_METHOD                     3: format_exc
                10      CALL_METHOD                     0
                12      LOAD_CONST                      2: ('exc_info',)
                14      CALL_FUNCTION_KW                2
                16      POP_TOP                         
                18      LOAD_CONST                      3: 500
                20      LOAD_GLOBAL                     4: cherrypy
                22      LOAD_ATTR                       5: response
                24      STORE_ATTR                      6: status
                26      LOAD_CONST                      4: b'<html><body>An unhandled exception occurred check logs for details<body><html>'
                28      BUILD_LIST                      1
                30      LOAD_GLOBAL                     4: cherrypy
                32      LOAD_ATTR                       5: response
                34      STORE_ATTR                      7: body
                36      LOAD_CONST                      0: None
                38      RETURN_VALUE                    
        'generic_error_response'
        '__main__'
        '--cfg'
        'cfg'
        True
        'Path to app config'
        'app.config.yaml'
        (
            'dest'
            'required'
            'help'
            'default'
        )
        '--autoreload'
        'autoreload'
        'store_true'
        'Set server to auto reload code'
        (
            'dest'
            'action'
            'help'
        )
        '--enable-client-api'
        'enable_client_api'
        'Enable Client API'
        '--enable-admin-api'
        'enable_admin_api'
        'Enable Admin API'
        '--enable-filter-api'
        'enable_filter_api'
        'Enable Filter API'
        '--enable-public-api'
        'enable_public_api'
        'Enable Public API'
        '--enable-subscriptions-api'
        'enable_subscription_api'
        'Enable Subscriptions API'
        '--port'
        'port'
        8080
        (
            'dest'
            'default'
        )
        '--initialize-database'
        'initialize_database'
        'Initialize the database'
        '--upgrade-database'
        'upgrade_database'
        'Upgrade the database'
        '--db-port-override'
        'db_port_override'
        'Override the database port from the config'
        (
            'dest'
            'help'
        )
        '--db-host-override'
        'db_host_override'
        'Override the database host from the config'
        '--alembic-config'
        'alembic_config'
        '/alembic.ini'
        (
            'dest'
            'default'
            'help'
        )
        '--seed-file'
        'seed_file'
        False
        'Path to databse configuration seed file'
        (
            'dest'
            'required'
            'help'
        )
        '--populate-production'
        'populate_production'
        'Populate data for populate_production'
        (
            'dest'
            'help'
            'action'
            'default'
        )
        '--activation-key-file'
        'activation_key_file'
        'File for license activation key'
        'Unable to find config %s'
        'database'
        'host'
        'logging'
        'api_server'
        10
        'Performing Database Connectivity Test'
        'Unable to initialize database connection. %s'
        5
        'Max Connection Attempts Exceeded. Exiting'
        1
        '/tmp/.temp.api.app.config.yaml'
        'w'
        'kasm_config='
        'x'
        'Initializing Postgres Database'
        'INSTALLATION_ID'
        'Stamping Database with revision'
        'head'
        'Unable to find seed file %s'
        'r'
        'utf-8'
        (
            'mode'
            'encoding'
        )
        'Upgrading Postgres Database'
        'Complete'
        'Unable to find license key file %s'
        '\n'
        ''
        'Activating license key'
        'server'
        'server_hostname'
        'kasm_api'
        (
            'application'
            'db'
            'hostname'
        )
        'Added Log Handler'
        '/'
        (
            'log.screen'
            'tools.db.on'
            'tools.header_sanitizer.on'
        )
        'KASM_DISABLE_HEADER_SANITIZATION'
        'false'
        'true'
        'tools.header_sanitizer.on'
        'global'
        'environment'
        'production'
        '0.0.0.0'
        (
            'server.socket_host'
            'server.socket_port'
        )
        'sanitize_errors'
        (
            'error_page.default'
            'request.error_response'
            'error_page.404'
        )
        (
            'AdminApi'
        )
        '/api/admin'
        (
            'FilterApi'
        )
        '/api/filter'
        [Code]
            File Name: server.py
            Object Name: <listcomp>
            Arg Count: 1
            Pos Only Arg Count: 0
            KW Only Arg Count: 0
            Locals: 2
            Stack Size: 4
            Flags: 0x00000043 (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)
            [Names]
                'category'
            [Var Names]
                '.0'
                'x'
            [Free Vars]
            [Cell Vars]
            [Constants]
                'subscription'
            [Disassembly]
                0       BUILD_LIST                      0
                2       LOAD_FAST                       0: .0
                4       FOR_ITER                        18 (to 24)
                6       STORE_FAST                      1: x
                8       LOAD_FAST                       1: x
                10      LOAD_ATTR                       0: category
                12      LOAD_CONST                      0: 'subscription'
                14      COMPARE_OP                      2 (==)
                16      POP_JUMP_IF_FALSE               4
                18      LOAD_FAST                       1: x
                20      LIST_APPEND                     2
                22      JUMP_ABSOLUTE                   4
                24      RETURN_VALUE                    
        '<listcomp>'
        'Subscription settings detected'
        (
            'SubscriptionApi'
        )
        '/api/subscriptions'
        (
            'ClientApi'
        )
        '/api'
        (
            'PublicAPI'
        )
        '/api/public'
    [Disassembly]
        0       LOAD_CONST                      0: 0
        2       LOAD_CONST                      1: None
        4       IMPORT_NAME                     0: argparse
        6       STORE_NAME                      0: argparse
        8       LOAD_CONST                      0: 0
        10      LOAD_CONST                      1: None
        12      IMPORT_NAME                     1: ipaddress
        14      STORE_NAME                      1: ipaddress
        16      LOAD_CONST                      0: 0
        18      LOAD_CONST                      1: None
        20      IMPORT_NAME                     2: logging.config
        22      STORE_NAME                      3: logging
        24      LOAD_CONST                      0: 0
        26      LOAD_CONST                      1: None
        28      IMPORT_NAME                     4: os
        30      STORE_NAME                      4: os
        32      LOAD_CONST                      0: 0
        34      LOAD_CONST                      1: None
        36      IMPORT_NAME                     5: re
        38      STORE_NAME                      5: re
        40      LOAD_CONST                      0: 0
        42      LOAD_CONST                      1: None
        44      IMPORT_NAME                     6: sys
        46      STORE_NAME                      6: sys
        48      LOAD_CONST                      0: 0
        50      LOAD_CONST                      1: None
        52      IMPORT_NAME                     7: time
        54      STORE_NAME                      7: time
        56      LOAD_CONST                      0: 0
        58      LOAD_CONST                      1: None
        60      IMPORT_NAME                     8: cherrypy
        62      STORE_NAME                      8: cherrypy
        64      LOAD_CONST                      0: 0
        66      LOAD_CONST                      1: None
        68      IMPORT_NAME                     9: yaml
        70      STORE_NAME                      9: yaml
        72      LOAD_CONST                      0: 0
        74      LOAD_CONST                      2: ('command',)
        76      IMPORT_NAME                     10: alembic
        78      IMPORT_FROM                     11: command
        80      STORE_NAME                      11: command
        82      POP_TOP                         
        84      LOAD_CONST                      0: 0
        86      LOAD_CONST                      3: ('Config',)
        88      IMPORT_NAME                     12: alembic.config
        90      IMPORT_FROM                     13: Config
        92      STORE_NAME                      13: Config
        94      POP_TOP                         
        96      LOAD_CONST                      0: 0
        98      LOAD_CONST                      4: ('_cperror',)
        100     IMPORT_NAME                     8: cherrypy
        102     IMPORT_FROM                     14: _cperror
        104     STORE_NAME                      14: _cperror
        106     POP_TOP                         
        108     LOAD_CONST                      0: 0
        110     LOAD_CONST                      5: ('create_engine',)
        112     IMPORT_NAME                     15: sqlalchemy
        114     IMPORT_FROM                     16: create_engine
        116     STORE_NAME                      16: create_engine
        118     POP_TOP                         
        120     LOAD_CONST                      0: 0
        122     LOAD_CONST                      6: ('DataAccessPostgres',)
        124     IMPORT_NAME                     17: data.access_postgres
        126     IMPORT_FROM                     18: DataAccessPostgres
        128     STORE_NAME                      18: DataAccessPostgres
        130     POP_TOP                         
        132     LOAD_CONST                      0: 0
        134     LOAD_CONST                      7: ('DataAccessFactory',)
        136     IMPORT_NAME                     19: data.data_access_factory
        138     IMPORT_FROM                     20: DataAccessFactory
        140     STORE_NAME                      20: DataAccessFactory
        142     POP_TOP                         
        144     LOAD_CONST                      0: 0
        146     LOAD_CONST                      8: ('DatabaseSessionTool',)
        148     IMPORT_NAME                     21: data.database_session_tool
        150     IMPORT_FROM                     22: DatabaseSessionTool
        152     STORE_NAME                      22: DatabaseSessionTool
        154     POP_TOP                         
        156     LOAD_CONST                      0: 0
        158     LOAD_CONST                      9: ('KasmLogHandler',)
        160     IMPORT_NAME                     23: log.handlers
        162     IMPORT_FROM                     24: KasmLogHandler
        164     STORE_NAME                      24: KasmLogHandler
        166     POP_TOP                         
        168     LOAD_CONST                      10: <CODE> get_db_session
        170     LOAD_CONST                      11: 'get_db_session'
        172     MAKE_FUNCTION                   0
        174     STORE_NAME                      25: get_db_session
        176     LOAD_CONST                      12: <CODE> database_connectivity_test
        178     LOAD_CONST                      13: 'database_connectivity_test'
        180     MAKE_FUNCTION                   0
        182     STORE_NAME                      26: database_connectivity_test
        184     LOAD_NAME                       8: cherrypy
        186     LOAD_ATTR                       27: tools
        188     LOAD_METHOD                     28: register
        190     LOAD_CONST                      14: 'on_start_resource'
        192     CALL_METHOD                     1
        194     LOAD_CONST                      15: <CODE> header_sanitizer
        196     LOAD_CONST                      16: 'header_sanitizer'
        198     MAKE_FUNCTION                   0
        200     CALL_FUNCTION                   1
        202     STORE_NAME                      29: header_sanitizer
        204     LOAD_NAME                       30: str
        206     LOAD_NAME                       30: str
        208     LOAD_NAME                       30: str
        210     LOAD_NAME                       30: str
        212     LOAD_NAME                       30: str
        214     LOAD_CONST                      17: ('status', 'message', 'traceback', 'version', 'return')
        216     BUILD_CONST_KEY_MAP             5
        218     LOAD_CONST                      18: <CODE> generic_error_message
        220     LOAD_CONST                      19: 'generic_error_message'
        222     MAKE_FUNCTION                   4
        224     STORE_NAME                      31: generic_error_message
        226     LOAD_NAME                       30: str
        228     LOAD_NAME                       30: str
        230     LOAD_NAME                       30: str
        232     LOAD_NAME                       30: str
        234     LOAD_NAME                       30: str
        236     LOAD_CONST                      17: ('status', 'message', 'traceback', 'version', 'return')
        238     BUILD_CONST_KEY_MAP             5
        240     LOAD_CONST                      20: <CODE> error_page_404
        242     LOAD_CONST                      21: 'error_page_404'
        244     MAKE_FUNCTION                   4
        246     STORE_NAME                      32: error_page_404
        248     LOAD_CONST                      22: <CODE> generic_error_response
        250     LOAD_CONST                      23: 'generic_error_response'
        252     MAKE_FUNCTION                   0
        254     STORE_NAME                      33: generic_error_response
        256     LOAD_NAME                       34: __name__
        258     LOAD_CONST                      24: '__main__'
        260     COMPARE_OP                      2 (==)
        262     POP_JUMP_IF_FALSE               1920
        266     LOAD_NAME                       0: argparse
        268     LOAD_METHOD                     35: ArgumentParser
        270     CALL_METHOD                     0
        272     STORE_NAME                      36: parser
        274     LOAD_NAME                       36: parser
        276     LOAD_ATTR                       37: add_argument
        278     LOAD_CONST                      25: '--cfg'
        280     LOAD_CONST                      26: 'cfg'
        282     LOAD_CONST                      27: True
        284     LOAD_CONST                      28: 'Path to app config'
        286     LOAD_CONST                      29: 'app.config.yaml'
        288     LOAD_CONST                      30: ('dest', 'required', 'help', 'default')
        290     CALL_FUNCTION_KW                5
        292     POP_TOP                         
        294     LOAD_NAME                       36: parser
        296     LOAD_ATTR                       37: add_argument
        298     LOAD_CONST                      31: '--autoreload'
        300     LOAD_CONST                      32: 'autoreload'
        302     LOAD_CONST                      33: 'store_true'
        304     LOAD_CONST                      34: 'Set server to auto reload code'
        306     LOAD_CONST                      35: ('dest', 'action', 'help')
        308     CALL_FUNCTION_KW                4
        310     POP_TOP                         
        312     LOAD_NAME                       36: parser
        314     LOAD_ATTR                       37: add_argument
        316     LOAD_CONST                      36: '--enable-client-api'
        318     LOAD_CONST                      37: 'enable_client_api'
        320     LOAD_CONST                      33: 'store_true'
        322     LOAD_CONST                      38: 'Enable Client API'
        324     LOAD_CONST                      35: ('dest', 'action', 'help')
        326     CALL_FUNCTION_KW                4
        328     POP_TOP                         
        330     LOAD_NAME                       36: parser
        332     LOAD_ATTR                       37: add_argument
        334     LOAD_CONST                      39: '--enable-admin-api'
        336     LOAD_CONST                      40: 'enable_admin_api'
        338     LOAD_CONST                      33: 'store_true'
        340     LOAD_CONST                      41: 'Enable Admin API'
        342     LOAD_CONST                      35: ('dest', 'action', 'help')
        344     CALL_FUNCTION_KW                4
        346     POP_TOP                         
        348     LOAD_NAME                       36: parser
        350     LOAD_ATTR                       37: add_argument
        352     LOAD_CONST                      42: '--enable-filter-api'
        354     LOAD_CONST                      43: 'enable_filter_api'
        356     LOAD_CONST                      33: 'store_true'
        358     LOAD_CONST                      44: 'Enable Filter API'
        360     LOAD_CONST                      35: ('dest', 'action', 'help')
        362     CALL_FUNCTION_KW                4
        364     POP_TOP                         
        366     LOAD_NAME                       36: parser
        368     LOAD_ATTR                       37: add_argument
        370     LOAD_CONST                      45: '--enable-public-api'
        372     LOAD_CONST                      46: 'enable_public_api'
        374     LOAD_CONST                      33: 'store_true'
        376     LOAD_CONST                      47: 'Enable Public API'
        378     LOAD_CONST                      35: ('dest', 'action', 'help')
        380     CALL_FUNCTION_KW                4
        382     POP_TOP                         
        384     LOAD_NAME                       36: parser
        386     LOAD_ATTR                       37: add_argument
        388     LOAD_CONST                      48: '--enable-subscriptions-api'
        390     LOAD_CONST                      49: 'enable_subscription_api'
        392     LOAD_CONST                      33: 'store_true'
        394     LOAD_CONST                      50: 'Enable Subscriptions API'
        396     LOAD_CONST                      35: ('dest', 'action', 'help')
        398     CALL_FUNCTION_KW                4
        400     POP_TOP                         
        402     LOAD_NAME                       36: parser
        404     LOAD_ATTR                       37: add_argument
        406     LOAD_CONST                      51: '--port'
        408     LOAD_CONST                      52: 'port'
        410     LOAD_CONST                      53: 8080
        412     LOAD_CONST                      54: ('dest', 'default')
        414     CALL_FUNCTION_KW                3
        416     POP_TOP                         
        418     LOAD_NAME                       36: parser
        420     LOAD_ATTR                       37: add_argument
        422     LOAD_CONST                      55: '--initialize-database'
        424     LOAD_CONST                      56: 'initialize_database'
        426     LOAD_CONST                      33: 'store_true'
        428     LOAD_CONST                      57: 'Initialize the database'
        430     LOAD_CONST                      35: ('dest', 'action', 'help')
        432     CALL_FUNCTION_KW                4
        434     POP_TOP                         
        436     LOAD_NAME                       36: parser
        438     LOAD_ATTR                       37: add_argument
        440     LOAD_CONST                      58: '--upgrade-database'
        442     LOAD_CONST                      59: 'upgrade_database'
        444     LOAD_CONST                      33: 'store_true'
        446     LOAD_CONST                      60: 'Upgrade the database'
        448     LOAD_CONST                      35: ('dest', 'action', 'help')
        450     CALL_FUNCTION_KW                4
        452     POP_TOP                         
        454     LOAD_NAME                       36: parser
        456     LOAD_ATTR                       37: add_argument
        458     LOAD_CONST                      61: '--db-port-override'
        460     LOAD_CONST                      62: 'db_port_override'
        462     LOAD_CONST                      63: 'Override the database port from the config'
        464     LOAD_CONST                      64: ('dest', 'help')
        466     CALL_FUNCTION_KW                3
        468     POP_TOP                         
        470     LOAD_NAME                       36: parser
        472     LOAD_ATTR                       37: add_argument
        474     LOAD_CONST                      65: '--db-host-override'
        476     LOAD_CONST                      66: 'db_host_override'
        478     LOAD_CONST                      67: 'Override the database host from the config'
        480     LOAD_CONST                      64: ('dest', 'help')
        482     CALL_FUNCTION_KW                3
        484     POP_TOP                         
        486     LOAD_NAME                       36: parser
        488     LOAD_ATTR                       37: add_argument
        490     LOAD_CONST                      68: '--alembic-config'
        492     LOAD_CONST                      69: 'alembic_config'
        494     LOAD_CONST                      70: '/alembic.ini'
        496     LOAD_CONST                      67: 'Override the database host from the config'
        498     LOAD_CONST                      71: ('dest', 'default', 'help')
        500     CALL_FUNCTION_KW                4
        502     POP_TOP                         
        504     LOAD_NAME                       36: parser
        506     LOAD_ATTR                       37: add_argument
        508     LOAD_CONST                      72: '--seed-file'
        510     LOAD_CONST                      73: 'seed_file'
        512     LOAD_CONST                      74: False
        514     LOAD_CONST                      75: 'Path to databse configuration seed file'
        516     LOAD_CONST                      76: ('dest', 'required', 'help')
        518     CALL_FUNCTION_KW                4
        520     POP_TOP                         
        522     LOAD_NAME                       36: parser
        524     LOAD_ATTR                       37: add_argument
        526     LOAD_CONST                      77: '--populate-production'
        528     LOAD_CONST                      78: 'populate_production'
        530     LOAD_CONST                      79: 'Populate data for populate_production'
        532     LOAD_CONST                      33: 'store_true'
        534     LOAD_CONST                      74: False
        536     LOAD_CONST                      80: ('dest', 'help', 'action', 'default')
        538     CALL_FUNCTION_KW                5
        540     POP_TOP                         
        542     LOAD_NAME                       36: parser
        544     LOAD_ATTR                       37: add_argument
        546     LOAD_CONST                      81: '--activation-key-file'
        548     LOAD_CONST                      82: 'activation_key_file'
        550     LOAD_CONST                      83: 'File for license activation key'
        552     LOAD_CONST                      64: ('dest', 'help')
        554     CALL_FUNCTION_KW                3
        556     POP_TOP                         
        558     LOAD_NAME                       36: parser
        560     LOAD_METHOD                     38: parse_args
        562     CALL_METHOD                     0
        564     STORE_NAME                      39: args
        566     LOAD_NAME                       4: os
        568     LOAD_ATTR                       40: path
        570     LOAD_METHOD                     41: exists
        572     LOAD_NAME                       39: args
        574     LOAD_ATTR                       42: cfg
        576     CALL_METHOD                     1
        578     POP_JUMP_IF_TRUE                596
        582     LOAD_NAME                       43: Exception
        584     LOAD_CONST                      84: 'Unable to find config %s'
        586     LOAD_NAME                       39: args
        588     LOAD_ATTR                       42: cfg
        590     BINARY_MODULO                   
        592     CALL_FUNCTION                   1
        594     RAISE_VARARGS                   1
        596     LOAD_NAME                       9: yaml
        598     LOAD_METHOD                     44: safe_load
        600     LOAD_NAME                       45: open
        602     LOAD_NAME                       39: args
        604     LOAD_ATTR                       42: cfg
        606     CALL_FUNCTION                   1
        608     CALL_METHOD                     1
        610     STORE_NAME                      46: app_config
        612     LOAD_NAME                       39: args
        614     LOAD_ATTR                       47: db_port_override
        616     POP_JUMP_IF_FALSE               638
        620     LOAD_NAME                       48: int
        622     LOAD_NAME                       39: args
        624     LOAD_ATTR                       47: db_port_override
        626     CALL_FUNCTION                   1
        628     LOAD_NAME                       46: app_config
        630     LOAD_CONST                      85: 'database'
        632     BINARY_SUBSCR                   
        634     LOAD_CONST                      52: 'port'
        636     STORE_SUBSCR                    
        638     LOAD_NAME                       39: args
        640     LOAD_ATTR                       49: db_host_override
        642     POP_JUMP_IF_FALSE               660
        646     LOAD_NAME                       39: args
        648     LOAD_ATTR                       49: db_host_override
        650     LOAD_NAME                       46: app_config
        652     LOAD_CONST                      85: 'database'
        654     BINARY_SUBSCR                   
        656     LOAD_CONST                      86: 'host'
        658     STORE_SUBSCR                    
        660     LOAD_NAME                       3: logging
        662     LOAD_ATTR                       50: config
        664     LOAD_METHOD                     51: dictConfig
        666     LOAD_NAME                       46: app_config
        668     LOAD_CONST                      87: 'logging'
        670     BINARY_SUBSCR                   
        672     LOAD_CONST                      88: 'api_server'
        674     BINARY_SUBSCR                   
        676     CALL_METHOD                     1
        678     POP_TOP                         
        680     LOAD_NAME                       3: logging
        682     LOAD_METHOD                     52: getLogger
        684     CALL_METHOD                     0
        686     STORE_NAME                      53: logger
        688     LOAD_CONST                      89: 10
        690     STORE_NAME                      54: max_retries
        692     LOAD_CONST                      74: False
        694     STORE_NAME                      55: connected
        696     LOAD_NAME                       53: logger
        698     LOAD_METHOD                     56: info
        700     LOAD_CONST                      90: 'Performing Database Connectivity Test'
        702     CALL_METHOD                     1
        704     POP_TOP                         
        706     LOAD_NAME                       57: range
        708     LOAD_CONST                      0: 0
        710     LOAD_NAME                       54: max_retries
        712     CALL_FUNCTION                   2
        714     GET_ITER                        
        716     FOR_ITER                        84 (to 802)
        718     STORE_NAME                      58: x
        720     SETUP_FINALLY                   16 (to 738)
        722     LOAD_CONST                      27: True
        724     STORE_NAME                      55: connected
        726     POP_BLOCK                       
        728     POP_TOP                         
        730     JUMP_ABSOLUTE                   802
        734     POP_BLOCK                       
        736     JUMP_FORWARD                    60 (to 798)
        738     DUP_TOP                         
        740     LOAD_NAME                       43: Exception
        742     COMPARE_OP                      10 (<EXCEPTION MATCH>)
        744     POP_JUMP_IF_FALSE               796
        748     POP_TOP                         
        750     STORE_NAME                      59: e
        752     POP_TOP                         
        754     SETUP_FINALLY                   28 (to 784)
        756     LOAD_NAME                       53: logger
        758     LOAD_METHOD                     60: exception
        760     LOAD_CONST                      91: 'Unable to initialize database connection. %s'
        762     LOAD_NAME                       59: e
        764     BINARY_MODULO                   
        766     CALL_METHOD                     1
        768     POP_TOP                         
        770     LOAD_NAME                       7: time
        772     LOAD_METHOD                     61: sleep
        774     LOAD_CONST                      92: 5
        776     CALL_METHOD                     1
        778     POP_TOP                         
        780     POP_BLOCK                       
        782     BEGIN_FINALLY                   
        784     LOAD_CONST                      1: None
        786     STORE_NAME                      59: e
        788     DELETE_NAME                     59: e
        790     END_FINALLY                     
        792     POP_EXCEPT                      
        794     JUMP_FORWARD                    2 (to 798)
        796     END_FINALLY                     
        798     JUMP_ABSOLUTE                   716
        802     LOAD_NAME                       55: connected
        804     POP_JUMP_IF_TRUE                828
        808     LOAD_NAME                       53: logger
        810     LOAD_METHOD                     62: error
        812     LOAD_CONST                      93: 'Max Connection Attempts Exceeded. Exiting'
        814     CALL_METHOD                     1
        816     POP_TOP                         
        818     LOAD_NAME                       6: sys
        820     LOAD_METHOD                     63: exit
        822     LOAD_CONST                      94: 1
        824     CALL_METHOD                     1
        826     POP_TOP                         
        828     LOAD_NAME                       39: args
        830     LOAD_ATTR                       64: initialize_database
        832     POP_JUMP_IF_TRUE                852
        836     LOAD_NAME                       39: args
        838     LOAD_ATTR                       65: upgrade_database
        840     POP_JUMP_IF_TRUE                852
        844     LOAD_NAME                       39: args
        846     LOAD_ATTR                       66: populate_production
        848     POP_JUMP_IF_FALSE               1268
        852     LOAD_CONST                      95: '/tmp/.temp.api.app.config.yaml'
        854     STORE_NAME                      67: temp_config
        856     LOAD_NAME                       45: open
        858     LOAD_NAME                       67: temp_config
        860     LOAD_CONST                      96: 'w'
        862     CALL_FUNCTION                   2
        864     SETUP_WITH                      82 (to 948)
        866     STORE_NAME                      68: f
        868     LOAD_NAME                       68: f
        870     LOAD_METHOD                     69: write
        872     LOAD_NAME                       9: yaml
        874     LOAD_METHOD                     70: dump
        876     LOAD_NAME                       46: app_config
        878     CALL_METHOD                     1
        880     CALL_METHOD                     1
        882     POP_TOP                         
        884     LOAD_CONST                      97: 'kasm_config='
        886     LOAD_NAME                       67: temp_config
        888     BINARY_ADD                      
        890     STORE_NAME                      71: x_arg
        892     LOAD_NAME                       39: args
        894     LOAD_ATTR                       72: alembic_config
        896     STORE_NAME                      72: alembic_config
        898     LOAD_NAME                       13: Config
        900     LOAD_NAME                       72: alembic_config
        902     CALL_FUNCTION                   1
        904     STORE_NAME                      73: alembic_cfg
        906     LOAD_NAME                       0: argparse
        908     LOAD_METHOD                     74: Namespace
        910     CALL_METHOD                     0
        912     LOAD_NAME                       73: alembic_cfg
        914     STORE_ATTR                      75: cmd_opts
        916     LOAD_NAME                       76: setattr
        918     LOAD_NAME                       73: alembic_cfg
        920     LOAD_ATTR                       75: cmd_opts
        922     LOAD_CONST                      98: 'x'
        924     BUILD_LIST                      0
        926     CALL_FUNCTION                   3
        928     POP_TOP                         
        930     LOAD_NAME                       73: alembic_cfg
        932     LOAD_ATTR                       75: cmd_opts
        934     LOAD_ATTR                       58: x
        936     LOAD_METHOD                     77: append
        938     LOAD_NAME                       71: x_arg
        940     CALL_METHOD                     1
        942     POP_TOP                         
        944     POP_BLOCK                       
        946     BEGIN_FINALLY                   
        948     WITH_CLEANUP_START              
        950     WITH_CLEANUP_FINISH             
        952     END_FINALLY                     
        954     LOAD_CONST                      1: None
        956     STORE_NAME                      78: postgres
        958     LOAD_NAME                       39: args
        960     LOAD_ATTR                       64: initialize_database
        962     POP_JUMP_IF_FALSE               1072
        966     LOAD_NAME                       53: logger
        968     LOAD_METHOD                     56: info
        970     LOAD_CONST                      99: 'Initializing Postgres Database'
        972     CALL_METHOD                     1
        974     POP_TOP                         
        976     LOAD_CONST                      0: 0
        978     LOAD_CONST                      1: None
        980     IMPORT_NAME                     79: initialize_postgres_db
        982     STORE_NAME                      79: initialize_postgres_db
        984     LOAD_NAME                       79: initialize_postgres_db
        986     LOAD_METHOD                     80: Postgres
        988     LOAD_NAME                       46: app_config
        990     CALL_METHOD                     1
        992     STORE_NAME                      78: postgres
        994     LOAD_NAME                       78: postgres
        996     LOAD_METHOD                     81: drop_schema
        998     CALL_METHOD                     0
        1000    POP_TOP                         
        1002    LOAD_NAME                       78: postgres
        1004    LOAD_METHOD                     82: create_schema
        1006    CALL_METHOD                     0
        1008    POP_TOP                         
        1010    LOAD_NAME                       78: postgres
        1012    LOAD_METHOD                     83: create_installation_id
        1014    CALL_METHOD                     0
        1016    STORE_NAME                      84: installation_id
        1018    LOAD_NAME                       30: str
        1020    LOAD_NAME                       84: installation_id
        1022    CALL_FUNCTION                   1
        1024    LOAD_NAME                       4: os
        1026    LOAD_ATTR                       85: environ
        1028    LOAD_CONST                      100: 'INSTALLATION_ID'
        1030    STORE_SUBSCR                    
        1032    LOAD_NAME                       53: logger
        1034    LOAD_METHOD                     56: info
        1036    LOAD_CONST                      101: 'Stamping Database with revision'
        1038    CALL_METHOD                     1
        1040    POP_TOP                         
        1042    LOAD_NAME                       4: os
        1044    LOAD_METHOD                     86: chdir
        1046    LOAD_NAME                       4: os
        1048    LOAD_ATTR                       40: path
        1050    LOAD_METHOD                     87: dirname
        1052    LOAD_NAME                       72: alembic_config
        1054    CALL_METHOD                     1
        1056    CALL_METHOD                     1
        1058    POP_TOP                         
        1060    LOAD_NAME                       11: command
        1062    LOAD_METHOD                     88: stamp
        1064    LOAD_NAME                       73: alembic_cfg
        1066    LOAD_CONST                      102: 'head'
        1068    CALL_METHOD                     2
        1070    POP_TOP                         
        1072    LOAD_NAME                       39: args
        1074    LOAD_ATTR                       66: populate_production
        1076    POP_JUMP_IF_FALSE               1184
        1080    LOAD_NAME                       4: os
        1082    LOAD_ATTR                       40: path
        1084    LOAD_METHOD                     41: exists
        1086    LOAD_NAME                       39: args
        1088    LOAD_ATTR                       89: seed_file
        1090    CALL_METHOD                     1
        1092    POP_JUMP_IF_TRUE                1110
        1096    LOAD_NAME                       43: Exception
        1098    LOAD_CONST                      103: 'Unable to find seed file %s'
        1100    LOAD_NAME                       39: args
        1102    LOAD_ATTR                       89: seed_file
        1104    BINARY_MODULO                   
        1106    CALL_FUNCTION                   1
        1108    RAISE_VARARGS                   1
        1110    LOAD_NAME                       45: open
        1112    LOAD_NAME                       39: args
        1114    LOAD_ATTR                       89: seed_file
        1116    LOAD_CONST                      104: 'r'
        1118    LOAD_CONST                      105: 'utf-8'
        1120    LOAD_CONST                      106: ('mode', 'encoding')
        1122    CALL_FUNCTION_KW                3
        1124    SETUP_WITH                      16 (to 1142)
        1126    STORE_NAME                      90: file
        1128    LOAD_NAME                       9: yaml
        1130    LOAD_METHOD                     44: safe_load
        1132    LOAD_NAME                       90: file
        1134    CALL_METHOD                     1
        1136    STORE_NAME                      91: seed_data
        1138    POP_BLOCK                       
        1140    BEGIN_FINALLY                   
        1142    WITH_CLEANUP_START              
        1144    WITH_CLEANUP_FINISH             
        1146    END_FINALLY                     
        1148    LOAD_NAME                       78: postgres
        1150    POP_JUMP_IF_TRUE                1172
        1154    LOAD_CONST                      0: 0
        1156    LOAD_CONST                      1: None
        1158    IMPORT_NAME                     79: initialize_postgres_db
        1160    STORE_NAME                      79: initialize_postgres_db
        1162    LOAD_NAME                       79: initialize_postgres_db
        1164    LOAD_METHOD                     80: Postgres
        1166    LOAD_NAME                       46: app_config
        1168    CALL_METHOD                     1
        1170    STORE_NAME                      78: postgres
        1172    LOAD_NAME                       78: postgres
        1174    LOAD_METHOD                     66: populate_production
        1176    LOAD_NAME                       91: seed_data
        1178    CALL_METHOD                     1
        1180    POP_TOP                         
        1182    JUMP_FORWARD                    30 (to 1214)
        1184    LOAD_NAME                       39: args
        1186    LOAD_ATTR                       65: upgrade_database
        1188    POP_JUMP_IF_FALSE               1214
        1192    LOAD_NAME                       53: logger
        1194    LOAD_METHOD                     56: info
        1196    LOAD_CONST                      107: 'Upgrading Postgres Database'
        1198    CALL_METHOD                     1
        1200    POP_TOP                         
        1202    LOAD_NAME                       11: command
        1204    LOAD_METHOD                     92: upgrade
        1206    LOAD_NAME                       73: alembic_cfg
        1208    LOAD_CONST                      102: 'head'
        1210    CALL_METHOD                     2
        1212    POP_TOP                         
        1214    LOAD_NAME                       39: args
        1216    LOAD_ATTR                       64: initialize_database
        1218    POP_JUMP_IF_TRUE                1238
        1222    LOAD_NAME                       39: args
        1224    LOAD_ATTR                       66: populate_production
        1226    POP_JUMP_IF_TRUE                1238
        1230    LOAD_NAME                       39: args
        1232    LOAD_ATTR                       65: upgrade_database
        1234    POP_JUMP_IF_FALSE               1258
        1238    LOAD_NAME                       53: logger
        1240    LOAD_METHOD                     56: info
        1242    LOAD_CONST                      108: 'Complete'
        1244    CALL_METHOD                     1
        1246    POP_TOP                         
        1248    LOAD_NAME                       6: sys
        1250    LOAD_METHOD                     63: exit
        1252    LOAD_CONST                      0: 0
        1254    CALL_METHOD                     1
        1256    POP_TOP                         
        1258    LOAD_NAME                       4: os
        1260    LOAD_METHOD                     93: remove
        1262    LOAD_NAME                       67: temp_config
        1264    CALL_METHOD                     1
        1266    POP_TOP                         
        1268    LOAD_NAME                       39: args
        1270    LOAD_ATTR                       94: activation_key_file
        1272    POP_JUMP_IF_FALSE               1396
        1276    LOAD_NAME                       4: os
        1278    LOAD_ATTR                       40: path
        1280    LOAD_METHOD                     41: exists
        1282    LOAD_NAME                       39: args
        1284    LOAD_ATTR                       94: activation_key_file
        1286    CALL_METHOD                     1
        1288    POP_JUMP_IF_TRUE                1306
        1292    LOAD_NAME                       43: Exception
        1294    LOAD_CONST                      109: 'Unable to find license key file %s'
        1296    LOAD_NAME                       39: args
        1298    LOAD_ATTR                       94: activation_key_file
        1300    BINARY_MODULO                   
        1302    CALL_FUNCTION                   1
        1304    RAISE_VARARGS                   1
        1306    LOAD_NAME                       45: open
        1308    LOAD_NAME                       39: args
        1310    LOAD_ATTR                       94: activation_key_file
        1312    LOAD_CONST                      104: 'r'
        1314    CALL_FUNCTION                   2
        1316    SETUP_WITH                      22 (to 1340)
        1318    STORE_NAME                      90: file
        1320    LOAD_NAME                       90: file
        1322    LOAD_METHOD                     95: read
        1324    CALL_METHOD                     0
        1326    LOAD_METHOD                     96: replace
        1328    LOAD_CONST                      110: '\n'
        1330    LOAD_CONST                      111: ''
        1332    CALL_METHOD                     2
        1334    STORE_NAME                      97: license_content
        1336    POP_BLOCK                       
        1338    BEGIN_FINALLY                   
        1340    WITH_CLEANUP_START              
        1342    WITH_CLEANUP_FINISH             
        1344    END_FINALLY                     
        1346    LOAD_CONST                      0: 0
        1348    LOAD_CONST                      1: None
        1350    IMPORT_NAME                     98: initial_activate
        1352    STORE_NAME                      98: initial_activate
        1354    LOAD_NAME                       98: initial_activate
        1356    LOAD_METHOD                     99: InitialActivate
        1358    LOAD_NAME                       46: app_config
        1360    LOAD_NAME                       53: logger
        1362    CALL_METHOD                     2
        1364    STORE_NAME                      100: activate
        1366    LOAD_NAME                       53: logger
        1368    LOAD_METHOD                     56: info
        1370    LOAD_CONST                      112: 'Activating license key'
        1372    CALL_METHOD                     1
        1374    POP_TOP                         
        1376    LOAD_NAME                       100: activate
        1378    LOAD_METHOD                     100: activate
        1380    LOAD_NAME                       97: license_content
        1382    CALL_METHOD                     1
        1384    POP_TOP                         
        1386    LOAD_NAME                       6: sys
        1388    LOAD_METHOD                     63: exit
        1390    LOAD_CONST                      0: 0
        1392    CALL_METHOD                     1
        1394    POP_TOP                         
        1396    LOAD_NAME                       25: get_db_session
        1398    LOAD_NAME                       46: app_config
        1400    CALL_FUNCTION                   1
        1402    STORE_NAME                      101: db
        1404    LOAD_CONST                      113: 'server'
        1406    LOAD_NAME                       46: app_config
        1408    COMPARE_OP                      6 (in)
        1410    POP_JUMP_IF_FALSE               1440
        1414    LOAD_CONST                      114: 'server_hostname'
        1416    LOAD_NAME                       46: app_config
        1418    LOAD_CONST                      113: 'server'
        1420    BINARY_SUBSCR                   
        1422    COMPARE_OP                      6 (in)
        1424    POP_JUMP_IF_FALSE               1440
        1428    LOAD_NAME                       46: app_config
        1430    LOAD_CONST                      113: 'server'
        1432    BINARY_SUBSCR                   
        1434    LOAD_CONST                      114: 'server_hostname'
        1436    BINARY_SUBSCR                   
        1438    JUMP_FORWARD                    2 (to 1442)
        1440    LOAD_CONST                      1: None
        1442    STORE_NAME                      102: log_hostname
        1444    LOAD_NAME                       24: KasmLogHandler
        1446    LOAD_ATTR                       103: create_cached_kasmloghandler
        1448    LOAD_CONST                      115: 'kasm_api'
        1450    LOAD_NAME                       101: db
        1452    LOAD_NAME                       102: log_hostname
        1454    LOAD_CONST                      116: ('application', 'db', 'hostname')
        1456    CALL_FUNCTION_KW                3
        1458    STORE_NAME                      104: kl
        1460    LOAD_NAME                       53: logger
        1462    LOAD_METHOD                     56: info
        1464    LOAD_CONST                      117: 'Added Log Handler'
        1466    CALL_METHOD                     1
        1468    POP_TOP                         
        1470    LOAD_NAME                       53: logger
        1472    LOAD_METHOD                     105: addHandler
        1474    LOAD_NAME                       104: kl
        1476    CALL_METHOD                     1
        1478    POP_TOP                         
        1480    LOAD_NAME                       4: os
        1482    LOAD_ATTR                       40: path
        1484    LOAD_METHOD                     87: dirname
        1486    LOAD_NAME                       4: os
        1488    LOAD_ATTR                       40: path
        1490    LOAD_METHOD                     106: realpath
        1492    LOAD_NAME                       107: __file__
        1494    CALL_METHOD                     1
        1496    CALL_METHOD                     1
        1498    STORE_NAME                      40: path
        1500    LOAD_CONST                      118: '/'
        1502    LOAD_CONST                      74: False
        1504    LOAD_CONST                      27: True
        1506    LOAD_CONST                      27: True
        1508    LOAD_CONST                      119: ('log.screen', 'tools.db.on', 'tools.header_sanitizer.on')
        1510    BUILD_CONST_KEY_MAP             3
        1512    BUILD_MAP                       1
        1514    STORE_NAME                      50: config
        1516    LOAD_NAME                       4: os
        1518    LOAD_METHOD                     108: getenv
        1520    LOAD_CONST                      120: 'KASM_DISABLE_HEADER_SANITIZATION'
        1522    LOAD_CONST                      121: 'false'
        1524    CALL_METHOD                     2
        1526    LOAD_METHOD                     109: lower
        1528    CALL_METHOD                     0
        1530    LOAD_CONST                      122: 'true'
        1532    COMPARE_OP                      2 (==)
        1534    POP_JUMP_IF_FALSE               1550
        1538    LOAD_CONST                      74: False
        1540    LOAD_NAME                       50: config
        1542    LOAD_CONST                      118: '/'
        1544    BINARY_SUBSCR                   
        1546    LOAD_CONST                      123: 'tools.header_sanitizer.on'
        1548    STORE_SUBSCR                    
        1550    LOAD_NAME                       48: int
        1552    LOAD_NAME                       39: args
        1554    LOAD_ATTR                       110: port
        1556    CALL_FUNCTION                   1
        1558    STORE_NAME                      110: port
        1560    LOAD_NAME                       39: args
        1562    LOAD_ATTR                       111: autoreload
        1564    POP_JUMP_IF_TRUE                1588
        1568    LOAD_NAME                       8: cherrypy
        1570    LOAD_ATTR                       50: config
        1572    LOAD_METHOD                     112: update
        1574    LOAD_CONST                      124: 'global'
        1576    LOAD_CONST                      125: 'environment'
        1578    LOAD_CONST                      126: 'production'
        1580    BUILD_MAP                       1
        1582    BUILD_MAP                       1
        1584    CALL_METHOD                     1
        1586    POP_TOP                         
        1588    LOAD_NAME                       8: cherrypy
        1590    LOAD_ATTR                       50: config
        1592    LOAD_METHOD                     112: update
        1594    LOAD_CONST                      127: '0.0.0.0'
        1596    LOAD_NAME                       110: port
        1598    LOAD_CONST                      128: ('server.socket_host', 'server.socket_port')
        1600    BUILD_CONST_KEY_MAP             2
        1602    CALL_METHOD                     1
        1604    POP_TOP                         
        1606    LOAD_NAME                       46: app_config
        1608    LOAD_METHOD                     113: get
        1610    LOAD_CONST                      113: 'server'
        1612    BUILD_MAP                       0
        1614    CALL_METHOD                     2
        1616    LOAD_METHOD                     113: get
        1618    LOAD_CONST                      129: 'sanitize_errors'
        1620    LOAD_CONST                      27: True
        1622    CALL_METHOD                     2
        1624    POP_JUMP_IF_FALSE               1648
        1628    LOAD_NAME                       8: cherrypy
        1630    LOAD_ATTR                       50: config
        1632    LOAD_METHOD                     112: update
        1634    LOAD_NAME                       31: generic_error_message
        1636    LOAD_NAME                       33: generic_error_response
        1638    LOAD_NAME                       32: error_page_404
        1640    LOAD_CONST                      130: ('error_page.default', 'request.error_response', 'error_page.404')
        1642    BUILD_CONST_KEY_MAP             3
        1644    CALL_METHOD                     1
        1646    POP_TOP                         
        1648    LOAD_NAME                       39: args
        1650    LOAD_ATTR                       114: enable_admin_api
        1652    POP_JUMP_IF_FALSE               1688
        1656    LOAD_CONST                      0: 0
        1658    LOAD_CONST                      131: ('AdminApi',)
        1660    IMPORT_NAME                     115: admin_api
        1662    IMPORT_FROM                     116: AdminApi
        1664    STORE_NAME                      116: AdminApi
        1666    POP_TOP                         
        1668    LOAD_NAME                       8: cherrypy
        1670    LOAD_ATTR                       117: tree
        1672    LOAD_METHOD                     118: mount
        1674    LOAD_NAME                       116: AdminApi
        1676    LOAD_NAME                       46: app_config
        1678    CALL_FUNCTION                   1
        1680    LOAD_CONST                      132: '/api/admin'
        1682    LOAD_NAME                       50: config
        1684    CALL_METHOD                     3
        1686    POP_TOP                         
        1688    LOAD_NAME                       39: args
        1690    LOAD_ATTR                       119: enable_filter_api
        1692    POP_JUMP_IF_FALSE               1728
        1696    LOAD_CONST                      0: 0
        1698    LOAD_CONST                      133: ('FilterApi',)
        1700    IMPORT_NAME                     120: filter_api
        1702    IMPORT_FROM                     121: FilterApi
        1704    STORE_NAME                      121: FilterApi
        1706    POP_TOP                         
        1708    LOAD_NAME                       8: cherrypy
        1710    LOAD_ATTR                       117: tree
        1712    LOAD_METHOD                     118: mount
        1714    LOAD_NAME                       121: FilterApi
        1716    LOAD_NAME                       46: app_config
        1718    CALL_FUNCTION                   1
        1720    LOAD_CONST                      134: '/api/filter'
        1722    LOAD_NAME                       50: config
        1724    CALL_METHOD                     3
        1726    POP_TOP                         
        1728    LOAD_CONST                      135: <CODE> <listcomp>
        1730    LOAD_CONST                      136: '<listcomp>'
        1732    MAKE_FUNCTION                   0
        1734    LOAD_NAME                       101: db
        1736    LOAD_METHOD                     122: get_config_settings
        1738    CALL_METHOD                     0
        1740    GET_ITER                        
        1742    CALL_FUNCTION                   1
        1744    STORE_NAME                      123: subscription_settings
        1746    LOAD_NAME                       123: subscription_settings
        1748    POP_JUMP_IF_FALSE               1762
        1752    LOAD_NAME                       53: logger
        1754    LOAD_METHOD                     56: info
        1756    LOAD_CONST                      137: 'Subscription settings detected'
        1758    CALL_METHOD                     1
        1760    POP_TOP                         
        1762    LOAD_NAME                       39: args
        1764    LOAD_ATTR                       124: enable_subscription_api
        1766    POP_JUMP_IF_TRUE                1776
        1770    LOAD_NAME                       123: subscription_settings
        1772    POP_JUMP_IF_FALSE               1808
        1776    LOAD_CONST                      0: 0
        1778    LOAD_CONST                      138: ('SubscriptionApi',)
        1780    IMPORT_NAME                     125: subscription_api
        1782    IMPORT_FROM                     126: SubscriptionApi
        1784    STORE_NAME                      126: SubscriptionApi
        1786    POP_TOP                         
        1788    LOAD_NAME                       8: cherrypy
        1790    LOAD_ATTR                       117: tree
        1792    LOAD_METHOD                     118: mount
        1794    LOAD_NAME                       126: SubscriptionApi
        1796    LOAD_NAME                       46: app_config
        1798    CALL_FUNCTION                   1
        1800    LOAD_CONST                      139: '/api/subscriptions'
        1802    LOAD_NAME                       50: config
        1804    CALL_METHOD                     3
        1806    POP_TOP                         
        1808    LOAD_NAME                       39: args
        1810    LOAD_ATTR                       127: enable_client_api
        1812    POP_JUMP_IF_FALSE               1848
        1816    LOAD_CONST                      0: 0
        1818    LOAD_CONST                      140: ('ClientApi',)
        1820    IMPORT_NAME                     128: client_api
        1822    IMPORT_FROM                     129: ClientApi
        1824    STORE_NAME                      129: ClientApi
        1826    POP_TOP                         
        1828    LOAD_NAME                       8: cherrypy
        1830    LOAD_ATTR                       117: tree
        1832    LOAD_METHOD                     118: mount
        1834    LOAD_NAME                       129: ClientApi
        1836    LOAD_NAME                       46: app_config
        1838    CALL_FUNCTION                   1
        1840    LOAD_CONST                      141: '/api'
        1842    LOAD_NAME                       50: config
        1844    CALL_METHOD                     3
        1846    POP_TOP                         
        1848    LOAD_NAME                       39: args
        1850    LOAD_ATTR                       130: enable_public_api
        1852    POP_JUMP_IF_FALSE               1888
        1856    LOAD_CONST                      0: 0
        1858    LOAD_CONST                      142: ('PublicAPI',)
        1860    IMPORT_NAME                     131: public_api
        1862    IMPORT_FROM                     132: PublicAPI
        1864    STORE_NAME                      132: PublicAPI
        1866    POP_TOP                         
        1868    LOAD_NAME                       8: cherrypy
        1870    LOAD_ATTR                       117: tree
        1872    LOAD_METHOD                     118: mount
        1874    LOAD_NAME                       132: PublicAPI
        1876    LOAD_NAME                       46: app_config
        1878    CALL_FUNCTION                   1
        1880    LOAD_CONST                      143: '/api/public'
        1882    LOAD_NAME                       50: config
        1884    CALL_METHOD                     3
        1886    POP_TOP                         
        1888    LOAD_NAME                       22: DatabaseSessionTool
        1890    LOAD_NAME                       46: app_config
        1892    CALL_FUNCTION                   1
        1894    LOAD_NAME                       8: cherrypy
        1896    LOAD_ATTR                       27: tools
        1898    STORE_ATTR                      101: db
        1900    LOAD_NAME                       8: cherrypy
        1902    LOAD_ATTR                       133: engine
        1904    LOAD_METHOD                     134: start
        1906    CALL_METHOD                     0
        1908    POP_TOP                         
        1910    LOAD_NAME                       8: cherrypy
        1912    LOAD_ATTR                       133: engine
        1914    LOAD_METHOD                     135: block
        1916    CALL_METHOD                     0
        1918    POP_TOP                         
        1920    LOAD_CONST                      1: None
        1922    RETURN_VALUE                    
